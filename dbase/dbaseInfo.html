<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/dbcss.css">
</head>
<body>
  <header>
    <nav>
        <ul>
            <li><a href="./../index.html">Principal</a></li>
            <li><a href="./../Subsistemas/Servicios.html">Servicios</a></li>
        </ul>
    </nav>
</header>

<main>
    <section>
        <h1>Diagrama de la base de datos del subsistema</h1>
        <img src="../imagenes/DiagramaBD.png" alt="Diagrama de la base de datos" class="db-diagram">
    </section>
    <section>
<h2>Pertinencia de la arquitectura de la base de datos</h2>

<p> La arquitectura de esta base de datos es adecuada y pertinente para el subsistema de servicios (presidenciales), 
    ya que permite almacenar y gestionar eficientemente la información relacionada con los diversos servicios ofrecidos,
     por los siguientes aspectos: </p>
     <section>
     <h4>Tabla "Departamento": </h4>
     <ul>
       <li>Esta tabla almacena la información de los diferentes departamentos que están relacionados con los servicios presidenciales. </li>
       <li>El identificador único (ID_Departamento), la descripción del departamento (Descripcion) y el identificador único del jefe de departamento (ID_Jefe), son los campos que guardarán dicha información.</li>
       <li>El campo "ID_Jefe" es la llave foránea que relaciona la tabla "Departamento" con la tabla "JefeDepartamento". 
        Esta relación permite asociar cada departamento con el jefe correspondiente.
        Al tener esta relación, se puede obtener información detallada sobre el responsable de cada departamento,lo cual es relevante para una organización y categorización adecuada de los servicios. </li>

      </ul>

     <h4>Tabla "JefeDepartamento": </h4>
     <ul>

       <li>Esta tabla guarda los datos de los jefes de cada departamento,esta tabla contiene la información del jefe de cada departamento, como su identificador único (ID_Jefe), primer nombre (Primer_Nombre), 
        segundo nombre (Segundo_Nombre), apellido paterno (Apellido_Paterno), apellido materno (Apellido_Materno),  Etc. </li>
       <li>Esto permite tener un registro de los responsables de cada departamento y facilita la comunicación y coordinación entre ellos.</li>
 
      </ul>

     <h4>Tabla "Servicio": </h4>
     <ul>

       <li>Esta tabla es la que almacena la información detallada de cada servicio presidencial </li>
       <li>Hablando de manera mas espicifica contiene su identificador único (ID_Servicio), el departamento al que pertenece (ID_Departamento), 
        el tipo de servicio (Tipo_Servicio), el descuento aplicable (Descuento) y el costo (Costo).
        Al tener esta información permite administrar y mantener un registro de todos los servicios ofrecidos de manera organizada.</li>
      </ul>

        <h4>Tabla "Requerimiento": </h4>
        <ul>

       <li>Esta tabla va almacenar la información sobre los diferentes tipos de requerimientos relacionados con los servicios </li>
       <li>Esta tabla esta conformada por los campos,ID_Requerimiento,  Comprobante_Identidad, Comprobante_nomina, .
        Al tener esta información se puede administrar de manera más flexible y detallada los diferentes tipos de requisitos que pueden aplicar a los servicios, sin mezclarlos directamente en la tabla "Servicio".</li>
      </ul>

       <h4>Tabla "RequeriemientoServicio": </h4>
       <ul>

       <li>Esta tabla contiene los campos que permiten vincular los registros de la tabla "Servicio" con los registros de la tabla "Requerimiento". Los cuales son "ID_Servicio" y "ID_Requerimiento", que funcionan como llaves foráneas que apuntan a las tablas principales.
         Es decir que esta tabla actúa como la tabla puente entre las tablas "Servicio" y "Requerimiento" para administrar de manera más eficiente la relación entre los servicios y los requerimientos. </li>
       <li>Esto permite agregar, modificar o eliminar requerimientos específicos para cada servicio sin afectar directamente la información de las tablas principales.
        Además, se puede obtener información detallada sobre qué requerimientos aplican a cada servicio y viceversa.</li>
      </ul>

      <ul>
       <p> Asi mismo, las relaciones entre las tablas son óptimas ya que facilitan la consulta y el manejo de la información.
         Por ejemplo, la relación entre "Departamento" y "Servicio" permite vincular cada servicio con el departamento correspondiente,
         lo cual es fundamental para la organización y gestión de los servicios  </p>
        </ul>
      </section>
  </section>

  <section>
   
      <h2>Como es que la pertinencia de la arquitectura de la base de datos satisfase los requerimientos de cada usuario</h2>

      <h3>Requerimientos del Administrador</h3>
      <p>El administrador tiene la responsabilidad de gestionar la base de datos y asegurar su correcto funcionamiento. Sus requerimientos son:</p>
      <ol>
          <li>Modificar el costo de los servicios:
              <div class="sub-item">La tabla "Servicio" permite al administrador acceder y modificar directamente los registros de costo de cada servicio.
                 Esta flexibilidad asegura que el administrador pueda ajustar precios según sea necesario, respondiendo a cambios en necesidades presupuestarias.</div>
          </li>
          <li>Modificar los requerimientos de cada servicio:
              <div class="sub-item">A través de la tabla "RequerimientoServicio", el administrador puede gestionar los requerimientos asociados a cada servicio de manera eficiente.
                 Al tener los requerimientos separados en la tabla "Requerimiento", se facilita la modificación, adición o eliminación de estos sin afectar otras partes del sistema.</div>
          </li>
          <li>Modificar el departamento que pertenece a cada servicio:
            <div class="sub-item">o	La relación entre las tablas "Servicio" y "Departamento" permite al administrador reasignar un servicio a un nuevo departamento de manera sencilla.
               Si surge un problema con un departamento, el administrador puede realizar estos cambios rápidamente, garantizando la continuidad del servicio</div>
        </li>
      </ol>
      <h3>Requerimientos del ciudadano</h3>
      <p>Los ciudadanos, tienen requerimientos específicos que buscan facilitar su interacción con los servicios:</p>
      <ol>
          <li>Filtrar un servicio por el tipo y por el costo:
              <div class="sub-item">La arquitectura de la base de datos permite implementar consultas que filtren los servicios basados en el tipo y costo.
                 La tabla "Servicio" contiene los campos necesarios para realizar estos filtros, lo que permite a los ciudadanos encontrar rápidamente los servicios que mejor se adaptan a sus necesidades.</div>
          </li>
          <li>Filtrar los requerimientos y el departamento perteneciente a cada servicio:
              <div class="sub-item">Gracias a la relación entre las tablas "RequerimientoServicio", "Requerimiento" y "Departamento", 
                los ciudadanos pueden acceder fácilmente a la información de los requerimientos asociados a un servicio específico, así como al departamento responsable.
                 Esto les brinda claridad y transparencia sobre lo que se necesita para acceder a cada servicio.</div>
          </li>
      </ol>
         <h2>Cumplimiento de las tres primeras formas  normales </h1>

          <section>

         <h4>Cumplimiento de la primera forma normal (1NF)</h4>
         <ul>
         <p>La 1NF asegura que todos los atributos de cada tabla contienen valores atómicos, es decir, cada campo de la tabla almacena un solo valor indivisible. 
          En la base de datos, esto se cumple porque todos los atributos, como "Tipo_Servicio", "Costo", "Comprobante_Identidad", "Apellido_Paterno", etc., almacenan valores individuales y no listas o conjuntos de valores. 
          Además, no hay campos que contengan múltiples valores en una sola celda, lo que garantiza que la estructura de la base de datos sea clara y no haya duplicación de información en una misma columna.</p>
         </ul>
          <h4>Cumplimiento de la segunda forma normal (2NF)</h4>
          <ul>
         <p>La 2NF requiere que, además de estar en 1NF, no haya dependencias parciales de la clave primaria. Esto significa que todos los atributos no clave deben depender completamente de la clave primaria y no solo de una parte de ella (si la clave es compuesta).
           En el caso de la tabla RequerimientoServicio, que tiene una clave primaria compuesta por ID_Requerimiento y ID_Servicio, no hay dependencias parciales, ya que esta tabla solo almacena las claves foráneas de los requerimientos y servicios.
            Las otras tablas, como Servicio, Departamento, y Requerimiento, tienen claves primarias simples, lo que también asegura que todos los demás atributos dependen completamente de la clave primaria.</p>
         </ul>
            <h4>Cumplimiento de la tercera forma normal (3NF)</h4>
        <ul>
            <p>La 3NF garantiza que, todas las entidades ya están en 2NF, tampoco existan dependencias transitivas entre los atributos no clave. Esto significa que ningún atributo no clave debe depender de otro atributo no clave, solo deben depender de la clave primaria. 
              En la base de datos, esto se cumple, ya que no existen relaciones indirectas entre los atributos no clave. 
              Por ejemplo, en la tabla Servicio, los atributos como "Tipo_Servicio", "Descuento" y "Costo" dependen directamente de ID_Servicio. En la tabla JefeDepartamento, atributos como "Apellido_Paterno" y "Correo" dependen directamente de ID_Jefe, sin generar dependencias entre los atributos no clave.</p>
            </ul>
            </section>

      
         <h2>Código SQL para crear la Base de Datos</h2>
           <pre><code>
            CREATE DATABASE STOPS_BD

            USE STOPS_BD
            
            GO
            
            -- Tabla Servicio
            CREATE TABLE Servicio (
                ID_Servicio INT PRIMARY KEY,
              ID_Departamento INT,
                Tipo_Servicio VARCHAR(200),
                Descuento FLOAT,
                Costo FLOAT
            );
            
            --Tabla Requerimiento
            CREATE TABLE Requerimiento (
                ID_Requerimiento INT PRIMARY KEY,
                Comprobante_Identidad VARCHAR(200),
                Comprobante_nomina CHAR(2)
              )
            
            -- Tabla Departamento
            CREATE TABLE Departamento (
                ID_Departamento INT PRIMARY KEY,
                ID_Jefe INT,  
                Descripcion VARCHAR(100)
            );
            
            -- Tabla JefeDepartamento
            CREATE TABLE JefeDepartamento (
                ID_Jefe INT PRIMARY KEY,
                Primer_Nombre VARCHAR(50),   
                Segundo_Nombre VARCHAR(50),  
                Apellido_Paterno VARCHAR(50), 
                Apellido_Materno VARCHAR(50),
                Correo VARCHAR(100),        
                Domicilio VARCHAR(150),      
                CURP VARCHAR(18),            
                RFC VARCHAR(13),              
                Telefono VARCHAR(20)
            );
            
            -- Tabla RequerimientoServicio
            CREATE TABLE RequerimientoServicio (
                ID_Requerimiento INT, 
              ID_Servicio INT
            );
            
            ALTER TABLE RequerimientoServicio
            ADD CONSTRAINT FK_Servicio_RequerimientoS FOREIGN KEY (ID_Servicio)
            REFERENCES Servicio(ID_Servicio);
            
            ALTER TABLE RequerimientoServicio
            ADD CONSTRAINT FK_Servicio_Requerimiento FOREIGN KEY (ID_Requerimiento)
            REFERENCES Requerimiento(ID_Requerimiento);
            
            ALTER TABLE Servicio
            ADD CONSTRAINT FK_Servicio_Departamento FOREIGN KEY (ID_Departamento)
            REFERENCES Departamento(ID_Departamento);
            
            ALTER TABLE Departamento
            ADD CONSTRAINT FK_Departamento_Jefe FOREIGN KEY (ID_Jefe)
            REFERENCES JefeDepartamento(ID_Jefe);
           </code></pre>

       <h2>Código SQL para la incercion de registros a la Base de Datos</h2>
           <pre><code>
      

            INSERT INTO Servicio (ID_Servicio, ID_Departamento, Tipo_Servicio, Descuento, Costo) VALUES
            (1, 1, 'Limpieza', 10.0, 100.0),
            (2, 1, 'Mantenimiento', 15.0, 200.0),
            (3, 2, 'Transporte', 5.0, 50.0),
            (4, 2, 'Asesoría', 20.0, 150.0),
            (5, 3, 'Catering', 25.0, 300.0);
            
            INSERT INTO RequerimientoServicio (ID_Requerimiento, ID_Servicio) VALUES
            (1, 1),
            (1, 3),
            (2, 2),
            (3, 4),
            (4, 5);
            
            INSERT INTO Requerimiento (ID_Requerimiento, Comprobante_Identidad, Comprobante_nomina) VALUES
            (1, '1234567890', 'A1'),
            (2, '0987654321', 'B2'),
            (3, '1122334455', 'C3'),
            (4, '5566778899', 'D4'),
            (5, '2233445566', 'E5');
            
            
            INSERT INTO Departamento (ID_Departamento, ID_Jefe, Descripcion) VALUES
            (1, 1, 'Limpieza'),
            (2, 2, 'Logística'),
            (3, 3, 'Catering'),
            (4, 4, 'Mantenimiento'),
            (5, 5, 'Asesoría');
            
            
            INSERT INTO JefeDepartamento (ID_Jefe, Primer_Nombre, Segundo_Nombre, Apellido_Paterno, Apellido_Materno, Correo, Domicilio, CURP, RFC, Telefono) VALUES
            (1, 'Juan', 'Pérez', 'Gómez', 'López', 'juan.perez@example.com', 'Calle 1, Ciudad', 'JUAPG123456HDFLNS', 'PGJ123456789', '5551234567'),
            (2, 'María', 'Fernández', 'Martínez', 'García', 'maria.fernandez@example.com', 'Calle 2, Ciudad', 'MAFM123456HDFLNS', 'FMN123456789', '5552345678'),
            (3, 'Carlos', 'Sánchez', 'Ramírez', 'Hernández', 'carlos.sanchez@example.com', 'Calle 3, Ciudad', 'CARS123456HDFLNS', 'SNR123456789', '5553456789'),
            (4, 'Ana', 'García', 'López', 'Torres', 'ana.garcia@example.com', 'Calle 4, Ciudad', 'ANGL123456HDFLNS', 'GLZ123456789', '5554567890'),
            (5, 'Luis', 'Martínez', 'Hernández', 'Gutiérrez', 'luis.martinez@example.com', 'Calle 5, Ciudad', 'LUMH123456HDFLNS', 'MRT123456789', '5555678901');
            
            
           </code></pre>
          </main>

</body>


</html>